<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Projects page for portfolio">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Projects Page </title>
    <link rel="stylesheet" href="projectsPage.css">
    <!-- <script src="projectsPage.js"></script> -->
    
</head>
<body>

    <header>
        <nav>
            <!-- hamburger menu symbols -->
            <label for="menu" >
                <span> </span>
                <span> </span>
                <span> </span>
            </label>
            <input id="menu" type="checkbox" >
            <ul class="navbar-elements">
                <li><a href="index.html">Homepage</a></li>
                <li><a href="resumePage.html">Resume</a></li>
                <li><a href="experiencePage.html">Experience</a></li>
                <li><a href="projectsPage.html">Projects</a></li>
                <li><a href="lifePage.html">Peek into my life!</a></li>
            </ul>
        </nav>

        <!-- reference for theme toggle: https://codepen.io/Umer_Farooq/pen/eYJgKGN -->
        <div id="toggle-switch">
            <input type="checkbox" class="checkbox" id="checkbox">
            <label for="checkbox" class="checkbox-label">
                <img src="https://assets.streamlinehq.com/image/private/w_512,h_512,ar_1/f_auto/v1/icons/freebies-freemojis/animals-nature/animals-nature/crescent-moon-c6qazn5ca4ut0m5puxm48.png?_a=DATAdtfiZAA0" id="dark" alt="dark mode">
                <img src="https://cdn-icons-png.freepik.com/512/10493/10493294.png" id="light" alt="light mode">
              <span class="ball"></span>
            </label>
        </div>

        <noscript>
            <p> Javascript is disabled on this page. Your mode preference will not be saved! </p>
        </noscript>

        <script>
            const checkbox = document.getElementById("checkbox");

            document.addEventListener("DOMContentLoaded", () => {
                // checks to see what localStorage has saved
                const isDarkMode = localStorage.getItem("darkMode") == "true";
                checkbox.checked = isDarkMode;

                if(isDarkMode) {
                    document.body.classList.add("light");
                }
                else {
                    document.body.classList.remove("light");
                }
            });

            checkbox.addEventListener("change", () => {
                document.body.classList.toggle("light");
                localStorage.setItem("darkMode", checkbox.checked);
            });

            const projectArray = [
                {
                    name: "Web Developer Journal",
                    description: "This is a project that I developed for a class at UCSD with the help of 11 other students. I helped with the calendar and mood widget aspect of the journal and also helped develop the homepage layout.",
                    image_url: "../assets/projectSC.png",
                    altText: "web developer journal screenshot",
                    githubLink: "https://github.com/cse110-sp24-group5/cse110-sp24-group5",
                },
                {
                    name: "Trading Card Collector Site",
                    description: "This is a project I am currently working on which allows users to log all of their physical Pokemon cards into a digital binder.",
                    image_url: "",
                    altText: "starting page screenshot",
                    githubLink: "https://github.com/nguyenhaley/trading-card-project",
                }
            ];

            class projectCard extends HTMLElement {
                constructor() {
                    super();
                }

                connectedCallback() {

                    const title = this.getAttribute('title') || 'Unknown title';
                    const description = this.getAttribute('description') || 'Unknown description';
                    const imageUrl = this.getAttribute('image-url') || '';
                    const altText = this.getAttribute('alt-text') || 'Unknown alternative image text';
                    const githubLink = this.getAttribute('github-link') || "Unknown github link";

                    this.innerHTML = '';
                    this.innerHTML += `
                        <div class="projectCard">
                            <h2 class="title">${title}</h2>
                            <picture>
                                <img src="${imageUrl}" alt="${altText}" >
                            </picture>
                            <p class="description">${description}</p>
                            <a href="${githubLink}"><button> Github Link </button></a>
                        </div>
                    `;
                }

            }

            window.addEventListener('DOMContentLoaded', async () => {
                const url = "https://api.jsonbin.io/v3/b/67d0edd48960c979a56fdb90";

                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Response status: ${response.status}`);
                    }

                    const jsonData = await response.json();
                    jsonData.record.forEach(project => {
                        window.projectElement = document.createElement("project-card");
                        window.projectElement.setAttribute("title", `${project.name}`);
                        window.projectElement.setAttribute("description", `${project.description}`);
                        window.projectElement.setAttribute("image-url", `${project.image_url}`);
                        window.projectElement.setAttribute("alt-text", `${project.altText}`);
                        window.projectElement.setAttribute("github-link", `${project.githubLink}`);
                        document.getElementById("allProjects").appendChild(window.projectElement);
                    });

                } catch (error) {
                    console.error(error.message);
                }

            });

            customElements.define('project-card', projectCard);

        </script>

    </header>

    <h1> Projects </h1>

    <section id="allProjects">
    </section>
    
</body>
</html>